<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <div id="app"></div>
</body>
</html>
<script src="../dist/vue.js"></script>
<script>
    const { 
        createApp,
        h,
        reactive,
        onBeforeMount,
        onMounted,
        onBeforeUpdate,
        onUpdated,
        onBeforeUnmount,
        onUnmounted
    } = Vue;

    const App = {
        // setup() {
        //     const state = reactive({ 
        //         count: '0',
        //         msg: 'this is my frist renderVue' 
        //     })
        //     return () => {
        //         return h('div', {
        //             style: {
        //                 color: 'blink',
        //                 fontSize: '20px',
        //                 height: '100px',
        //                 background: 'gray'
        //             }
        //         }, [`${state.count}--${state.msg}`, 111111111])
        //     }
        // }
        template: `
            <div>
                <h1 v-if="state.count" name = '11'>
                    <p @click = "tes">11{{state.count}}</p>
                </h1>
                <h2 v-else>
                    <p>
                        <span>222</span>
                    </p>
                </h2 >
            </div>
        `,
        setup() {
            onBeforeMount(() => {
                console.log('onBeforeMount')
            }),
            onMounted(() => {
                console.log('onMounted')
            }),
            onBeforeUpdate(() => {
                console.log('onBeforeUpdate')
            }),
            onUpdated(() => {
                console.log('onUpdated')
            }),
            onBeforeUnmount(() => {
                console.log('onBeforeUnmount')
            }),
            onUnmounted(() => {
                console.log('onUnmounted')
            })
            
            const state = reactive({ flag: true, count: '0', });

            const tes = () => {
                
                state.count++
                console.log(state.count)
            }

            return {
                state,
                tes
            }

            // setTimeout(() => {
            //     // 测试批量更新
            //     state.flag = false;
            //     state.count = 100;
            //     state.count = 200;
            // }, 1000);
           
            // return () => {
            //     return state.flag ?
            //         h('div', { style: { color: 'red' }, onClick: $event => (console.log($event)), }, `${state.count}--hello`) :
            //         h('p', { style: { color: 'blue' }, onClick: $event => (console.log($event)) }, `${state.count}--word`)
            // }
        }
        // setup() {
        //     const state = reactive({ flag: true, count: '0', });
        //     setTimeout(() => {
        //         // 测试diff
        //         state.flag = false;
        //     }, 3000);
        //     return () => {
        //         return state.flag ?
        //             h('div', { style: { color: 'red' } }, [
        //                 h("p", { key: "a" }, "1"),
        //                 h("p", { key: "b" }, "2"),
        //                 h("p", { key: "c" }, "3"),
        //                 h("p", { key: "d" }, "4"),
        //                 h("p", { key: "e" }, "5"),
        //                 h("p", { key: "f" }, "6"),
        //                 h("p", { key: "g" }, "7"),
        //             ]) :
        //             h('div', { style: { color: 'blue' } }, [
        //                 h("p", { key: "a" }, "111"),
        //                 h("p", { key: "b" }, "222"),
        //                 h("p", { key: "e" }, "333"),
        //                 h("p", { key: "c" }, "444"),
        //                 h("p", { key: "d" }, "555"),
        //                 h("p", { key: "h" }, "666"),
        //                 h("p", { key: "f" }, "777"),
        //                 h("p", { key: "g" }, "888"),
        //             ])
        //     }
        // }
    }
    createApp(App).mount('#app');
</script>